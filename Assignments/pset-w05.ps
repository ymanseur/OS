%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Wed Oct  7 02:16:30 2015
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.19 1
%%Pages: 2
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(ECE357:Computer Operating Systems)69.336 48 Q
(PS 5/pg 1)41.55 E(\2512015 Jef)119.78 E 2.5(fH)-.25 G(akner)-2.5 E/F1
11/Times-Bold@0 SF(Memory/mmap T)244.9 97 Q(est Pr)-1.012 E(ograms)-.198
E/F2 11/Times-Roman@0 SF 3.071(As)58 136 S .321(ophisticated programmin\
g technique is to create "test programs" which probe for the e)-3.071 F
.321(xistence of certain features)-.165 F 2.685(on a tar)58 149 R 2.685
(get platform, or which "pro)-.198 F -.165(ve)-.165 G 5.435("t).165 G
2.685(hat something w)-5.435 F 2.685(orks a certain w)-.11 F(ay)-.11 E
8.186(.F)-.715 G 2.686(or e)-8.351 F 2.686(xample, man)-.165 F 5.436(yo)
-.165 G(pen-source)-5.436 E .681(programs use the GNU autoconf utility \
to automatically test for things such as the size of a long, and create\
 header)58 162 R
(\214les so that code can be compiled automatically on a v)58 175 Q
(ariety of platforms.)-.275 E .567
(In this assignment, you will be creating test programs to disco)58 201
R -.165(ve)-.165 G 3.318(rt).165 G .568(he answers to a v)-3.318 F .568
(ariety of questions ha)-.275 F .568(ving to do)-.22 F .233
(with the virtual memory system.)58 214 R .232
(Of course, you \(should\) already kno)5.732 F 2.982(wt)-.275 G .232
(he answers....the)-2.982 F 2.982(ya)-.165 G .232
(re probably in this unit')-2.982 F(s)-.605 E 2.385(lecture notes, b)58
227 R 2.385(ut your task is to create a program or system of programs t\
o learn each answer)-.22 F F1 2.386(without user)5.136 F(inter)58 240 Q
-.11(ve)-.11 G 3.213(ntion. T).11 F 3.213(ob)-1.012 G 3.213(eat)-3.213 G
.463(rue test pr)-3.213 F .462
(ogram, it must be capable of determing the answer thr)-.198 F .462
(ough conditional test,)-.198 F(not simply printing out a f)58 253 Q(or)
-.275 E(egone conclusion!)-.198 E F2 -.165(Fo)5.5 G 2.75(re).165 G
(xample, the follo)-2.915 E(wing is a v)-.275 E(alid test:)-.275 E/F3 10
/Courier@0 SF
(if \(2+2==4\) printf\("ints are at least 3 bits long\\n"\);)58 267 Q F2
(Write a program or series of programs to answer these questions about \
memory-mapped \214les:)58 299 Q 1.644
(A: "When one has mapped a \214le for read-only access, b)58 318 R 1.644
(ut attempts to write to that mapped area, what signal is)-.22 F
(generated?")58 331 Q 1.529(B: "If one maps a \214le with MAP_SHARED an\
d then writes to the mapped memory)58 350 R 4.278(,i)-.715 G 4.278(st)
-4.278 G 1.528(hat update visible when)-4.278 F(accessing the \214le th\
rough the traditional lseek\(2\)/read\(2\) system calls?")58 363 Q
(C: Same question as abo)58 382 Q -.165(ve)-.165 G 2.75(,e).165 G
(xcept for MAP_PRIV)-2.915 E -1.221(AT)-1.485 G(E.)1.221 E 2.632
(D: "Say a pre-e)58 401 R 2.632
(xisting \214le of a certain size which is not an e)-.165 F 2.632
(xact multiple of the page size is mapped with)-.165 F .326(MAP_SHARED \
and read/write access, and one writes to the mapped memory just be)58
414 R .325(yond the byte corresponding to)-.165 F .775
(the last byte of the e)58 427 R .776(xisting \214le.)-.165 F .776
(Does the size of the \214le through the traditional interf)6.276 F .776
(ace \(e.g.)-.11 F/F4 11/Courier@0 SF(stat\(2\))3.526 E F2 3.526(\)c)C
(hange?)-3.526 E(\()58 440 Q/F5 11/Times-Italic@0 SF(In your narr)A
(ative)-.165 E 2.75(,e)-.11 G(xplain your r)-2.97 E
(easoning why this is or is not the case)-.407 E F2(\))A .313(E: "Let u\
s say that after performing the aforementioned memory write, one then i\
ncreased the size of the \214le be)58 459 R(yond)-.165 E .061
(the written area, without o)58 472 R -.165(ve)-.165 G -.22(r-).165 G
.061(writing the interv).22 F .061(ening contents \(e.g. by using)-.165
F F4(lseek\(2\))2.811 E F2 .061(and then)2.811 F F4(write\(2\))2.811 E
F2 .062(with a)2.812 F .112
(size of 1\), thus creating a 'hole' in the \214le.)58 485 R .112
(What happens to the data that had been written to this hole pre)5.612 F
.111(viously via)-.275 F(the memory-map?)58 498 Q(Are the)5.5 E 2.75(yv)
-.165 G(isible in the \214le")-2.75 E .883(F: Let')58 517 R 3.633(ss)
-.605 G .883(ay there is an e)-3.633 F .884
(xisting small \214le \(say 10 bytes\).)-.165 F .884
(Can you establish a v)6.384 F .884(alid mmap re)-.275 F .884(gion tw)
-.165 F 3.634(op)-.11 G .884(ages \(8192)-3.634 F .499(bytes\) long?)58
530 R .499(If so, what signal is deli)5.999 F -.165(ve)-.275 G .498
(red when attempting to access memory in the second page?).165 F .498
(What about the)5.998 F .427(\214rst page?)58 543 R .427(Explain an)
5.927 F 3.177(yd)-.165 G(if)-3.177 E .428(ferences in these outcomes \()
-.275 F F5 .428(your e)B .428
(xplanation need not be printed out by the test pr)-.22 F -.11(og)-.495
G -.165(ra).11 G(m).165 E
(... it can be in your accompanying assignment write-up or in the sour)
58 556 Q(ce code comments)-.407 E F2(\))A F5(Sample output.)58 582 Q
-1.012(Yo)5.5 G(ur output does not have to matc)1.012 E 2.75(ht)-.165 G
(his e)-2.75 E(xactly)-.22 E F2(:)A F3 6($.)58 596 S(/mm2 D)-6 E
(Creating 8195 byte random file testfile)58 610 Q(1+0 records in)58 624
Q(1+0 records out)58 638 Q
(The size of the file as reported by fstat is 8195)58 652 Q
(about to MAP_SHARED)58 666 Q(About to write 4 bytes to offset 8195)58
680 Q(The new size of the file as reported by fstat is 8195)58 694 Q
(File dump starting at offset 8195, read req 4, ret 0)58 708 Q 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(ECE357:Computer Operating Systems)36 52 Q
(PS 5/pg 2)78.105 E(\2512015 Jef)164.158 E 2.75(fH)-.275 G(akner)-2.75 E
/F1 10/Courier@0 SF(<EOF>)58 105 Q(Memory dump starting at offset 8195)
58 119 Q 6(<58> <59> <5A> <00>)64 133 R(In response to question D,)58
147 Q(NO, the file size does not change)12 E
(About to expand file by 13 bytes and write\(2\) to new end)58 161 Q
(Memory dump starting at offset 8195 for 16 bytes)58 175 Q 6
(<58> <59> <5A> <00> <00> <00> <00> <00> <00> <00> <41> <42> <43>)64 189
R 6(<00> <00> <00>)70 203 R
(File dump starting at offset 8195, read req 16, ret 13)58 217 Q 6
(<58> <59> <5A> <00> <00> <00> <00> <00> <00> <00> <41> <42> <43>)64 231
R(<EOF>)58 245 Q(In response to question E:)58 259 Q
(YES, the data previously written to the hole remain)12 E/F2 11
/Times-Italic@0 SF 4.293 -1.012(To p)58 298 T -.495(ro)1.012 G 2.269
(perly code these test pr).495 F -.11(og)-.495 G -.165(ra).11 G 2.269
(ms, you will need to establish signal handler).165 F 5.019(sa)-.11 G
5.019(sd)-5.019 G 2.269(iscussed in Unit 4.)-5.019 F 2.268(It is)7.768 F
.467(permissible to write one pr)58 311 R -.11(og)-.495 G -.165(ra).11 G
3.217(mw).165 G(hic)-3.217 E 3.218(hc)-.165 G .468(ontains all of the t\
ests and either select them with a command-line \215a)-3.218 F .688 -.11
(g, o)-.11 H(r).11 E 1.319(run them sequentially \(this is mor)58 324 R
4.069(ec)-.407 G(umber)-4.069 E 1.319(some as it r)-.11 F(equir)-.407 E
1.319(es clean-up fr)-.407 F 1.319
(om the last test\), or to write a series of)-.495 F(individual pr)58
337 Q -.11(og)-.495 G -.165(ra).11 G(ms whic).165 E 2.75(he)-.165 G(ac)
-2.75 E 2.75(ht)-.165 G(est one thing)-2.75 E(.)-.165 E 0 Cg EP
%%Trailer
end
%%EOF
