%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Tue Sep 29 23:46:33 2015
%%DocumentNeededResources: font Times-Roman
%%+ font Helvetica-Bold
%%+ font Courier
%%+ font Times-Bold
%%DocumentSuppliedResources: procset grops 1.19 1
%%Pages: 1
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Helvetica-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Bold
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Bold@0 ENC0/Times-Bold RE/Courier@0 ENC0/Courier RE
/Helvetica-Bold@0 ENC0/Helvetica-Bold RE/Times-Roman@0 ENC0/Times-Roman
RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(ECE357:Computer Operating Systems)69.336 48 Q
(PS 4/pg 1)41.55 E(\2512015 Jef)119.78 E 2.5(fH)-.25 G(akner)-2.5 E/F1
11/Helvetica-Bold@0 SF(Pr)244.867 97 Q(ob)-.22 E(lem 1 -- Fixing y)-.11
E(our cat)-.275 E/F2 11/Times-Roman@0 SF(Re)58 116 Q 1.074
(visit your concatenation program from Unit 1.)-.275 F(Mak)6.574 E 3.824
(es)-.11 G 1.073(ure to correct an)-3.824 F 3.823(ym)-.165 G(istak)
-3.823 E 1.073(es with error handling/reporting)-.11 F
(and partial write handling.)58 129 Q
(Then modify it to accept only the follo)5.5 E(wing syntax:)-.275 E/F3
10/Courier@0 SF(catgrepmore pattern infile1 [...infile2...])94 143 Q F2
-.165(Fo)58 162 S(r).165 E/F4 11/Times-Bold@0 SF(each)3.642 E/F5 11
/Courier@0 SF(infile)3.642 E F2 .892(speci\214ed, open that \214le, b)
3.642 F .893(ut instead of cop)-.22 F .893
(ying to a speci\214c \214le or to standard output, write the)-.11 F
.206(contents of the \214le into a pipeline of)58 175 R F5 .206
(grep pattern)2.956 F F2 .206(piped into)2.956 F F5(more)2.956 E F2 .206
(\(you could also use)2.956 F F5(pg)2.956 E F2(or)2.955 E F5(less)2.955
E F2 2.955(\). This)B(will)2.955 E .255(require forking and e)58 188 R
-.165(xe)-.165 G .255(cing tw).165 F 3.005(oc)-.11 G .255
(hild processes.)-3.005 F .256
(It is recommended that your original program be the parent of both)
5.755 F
(the grep and the more children \(as opposed to using grandchildren\).)
58 201 Q .099(The intention is to display only those lines of the \214l\
e that match the pattern, and to page through them one screen at a)58
220 R 2.803(time. When)58 233 R .054(the user e)2.804 F .054
(xits the pager program \(by pressing the q k)-.165 F -.165(ey)-.11 G
.054(\), mo).165 F .384 -.165(ve o)-.165 H 2.804(nt).165 G 2.804(ot)
-2.804 G .054(he ne)-2.804 F(xt)-.165 E F5(infile)2.804 E F2 2.804(,i)C
2.804(fa)-2.804 G -.165(ny)-2.804 G 5.554(.W)-.55 G .054(hen the)-5.554
F 1.129(user sends a k)58 246 R -.165(ey)-.11 G 1.128(board interrupt S\
IGINT \(typically by pressing Control-C\), do not abruptly terminate th\
e program.).165 F(Instead, \214rst write to stderr the total number of \
\214les and bytes processed, and then e)58 259 Q(xit.)-.165 E 1.874
(Is this a f)58 278 R 1.874(airly silly e)-.11 F -.165(xe)-.165 G 4.624
(rcise? Perhaps. One).165 F 1.874
(could accomplish the same thing with e)4.624 F 1.875
(xisting UNIX utilities in a)-.165 F(number of w)58 291 Q(ays.)-.11 E
1.004(Be on the look)58 310 R 1.004
(out: Setting up the pipes, and in particular a)-.11 F -.22(vo)-.22 G
1.004(iding dangling \214le descriptors, is important to proper).22 F
.017(program operation.)58 323 R .017(If your program terminates une)
5.517 F .018
(xpectedly or gets stuck in an endless loop, this may be a symptom)-.165
F(of slopp)58 336 Q 2.75<798c>-.11 G(le descriptor w)-2.75 E(ork.)-.11 E
.352(In order to properly test all aspects of your program, you must us\
e sample \214les that are at least 16K long, so that the)58 355 R 1.143
(pipe b)58 368 R(uf)-.22 E 1.144(fer can actually \214ll up.)-.275 F
-1.21(Yo)6.644 G 3.894(um)1.21 G 1.144(ust also test for proper beha)
-3.894 F 1.144(vior when the user quits the pager program, or)-.22 F
.677(sends SIGINT)58 381 R 6.177(.U)-.814 G .677
(sing the ps command, mak)-6.177 F 3.427(es)-.11 G .677
(ure that when your program e)-3.427 F .677(xits, under an)-.165 F 3.426
(yc)-.165 G .676(ircumstances, that the)-3.426 F
(more and grep commands ha)58 394 Q .33 -.165(ve a)-.22 H(lso e).165 E
2.75(xited. If)-.165 F(the)2.75 E 2.75(yg)-.165 G
(et stuck, it is probably because of dangling \214le descriptors.)-2.75
E .788(The same restrictions apply as in PS#1: Do not use the stdio lib\
rary for opening, closing, reading, writing, forking,)58 413 R -.165
(exe)58 426 S .926(cing or setting up the pipe.).165 F .926
(Use the system calls directly)6.426 F 6.426(.Y)-.715 G .926
(ou may use library functions for ar)-7.636 F .925(gument parsing,)-.198
F(error checking and reporting, printing out the e)58 439 Q
(xiting message, etc.)-.165 E .523(Helpful note: In order for)58 458 R
F5(more)3.273 E F2 .524(to recei)3.273 F .854 -.165(ve k)-.275 H -.165
(ey).055 G(strok).165 E .524
(es without interfering with reading from stdin, it opens a special)-.11
F(de)58 471 Q(vice)-.275 E F5(/dev/tty)5.418 E F2 2.668
(which is your session terminal.)5.418 F 4.428 -.88(We h)8.168 H -2.475
-.22(av e).88 H(n').22 E 5.418(tc)-.198 G -.165(ove)-5.418 G 2.668
(red this yet.).165 F 2.667(Furthermore, to recei)8.168 F 2.997 -.165
(ve t)-.275 H(he).165 E -.11(ke)58 484 S(ystrok)-.055 E .122
(es without w)-.11 F .122(aiting for a ne)-.11 F .122(wline character)
-.275 F 2.873(,m)-.44 G .123(ore will put the)-2.873 F F5(tty)2.873 E F2
(de)2.873 E .123(vice into a special mode.)-.275 F .123(It may happen)
5.623 F .774(during de)58 497 R -.165(ve)-.275 G .774
(lopment and testing of this program that more e).165 F .774
(xits without restoring the)-.165 F F5(tty)3.523 E F2 .773
(to the normal mode, and)3.523 F .745
(your terminal session will appear to be "crashed".)58 510 R .746
(Characters will not echo and nothing will seem to w)6.246 F 3.496
(ork. T)-.11 F 3.496(og)-.88 G(et)-3.496 E .253
(out of this mode, press Control-J se)58 523 R -.165(ve)-.275 G .253
(ral times, then type the command).165 F F5 .253(stty sane)3.003 F F2
.253(and then press Control-J \(NO)3.003 F(T)-.44 E(the Enter k)58 536 Q
-.165(ey)-.11 G(!\) ag).165 E(ain.)-.055 E 0 Cg EP
%%Trailer
end
%%EOF
